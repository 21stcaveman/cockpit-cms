/*! UIkit 2.6.0 | http://www.getuikit.com | (c) 2014 YOOtheme | MIT License */

!function(a){"function"==typeof define&&define.amd&&define("uikit-sortable",["uikit"],function(){return jQuery.UIkit.sortable||a(window.jQuery,jQuery.UIkit,window,document)}),window&&window.jQuery&&window.jQuery.UIkit&&a(window.jQuery,jQuery.UIkit,window,document)}(function(a,b,c,d){var e="ontouchstart"in c,f=a("html"),g=[],h=a(c),i=function(){var a=d.createElement("div"),b=d.documentElement;if(!("pointerEvents"in a.style))return!1;a.style.pointerEvents="auto",a.style.pointerEvents="x",b.appendChild(a);var e=c.getComputedStyle&&"auto"===c.getComputedStyle(a,"").pointerEvents;return b.removeChild(a),!!e}(),j=e?"touchstart":"mousedown",k=e?"touchmove":"mousemove",l=e?"touchend":"mouseup",m=e?"touchcancel":"mouseup";return b.component("sortable",{defaults:{prefix:"uk",listNodeName:"ul",itemNodeName:"li",listBaseClass:"{prefix}-sortable",listClass:"{prefix}-sortable-list",listitemClass:"{prefix}-sortable-list-item",itemClass:"{prefix}-sortable-item",dragClass:"{prefix}-sortable-list-dragged",movingClass:"{prefix}-sortable-moving",handleClass:"{prefix}-sortable-handle",collapsedClass:"{prefix}-collapsed",placeClass:"{prefix}-sortable-placeholder",noDragClass:"{prefix}-sortable-nodrag",emptyClass:"{prefix}-sortable-empty",group:0,maxDepth:10,threshold:20},init:function(){var b=this;Object.keys(this.options).forEach(function(a){-1!=String(b.options[a]).indexOf("{prefix}")&&(b.options[a]=b.options[a].replace("{prefix}",b.options.prefix))}),this.tplempty='<div class="'+this.options.emptyClass+'"/>',this.find(">"+this.options.itemNodeName).addClass(this.options.listitemClass).end().find("ul:not(.ignore-list)").addClass(this.options.listClass).find(">li").addClass(this.options.listitemClass),this.element.children(this.options.itemNodeName).length||this.element.append(this.tplempty),this.element.data("sortable-id","ID"+(new Date).getTime()+"RAND"+Math.ceil(1e5*Math.random())),this.reset(),this.element.data("sortable-group",this.options.group),this.placeEl=a('<div class="'+this.options.placeClass+'"/>'),this.find(this.options.itemNodeName).each(function(){b.setParent(a(this))}),this.on("click","[data-sortable-action]",function(c){if(!b.dragEl&&(e||0===c.button)){c.preventDefault();var d=a(c.currentTarget),f=d.data("sortableAction"),g=d.closest(b.options.itemNodeName);"collapse"===f&&b.collapseItem(g),"expand"===f&&b.expandItem(g),"toggle"===f&&b.toggleItem(g)}});var d=function(c){var d=a(c.target);if(!d.hasClass(b.options.handleClass)){if(d.closest("."+b.options.noDragClass).length)return;d=d.closest("."+b.options.handleClass)}!d.length||b.dragEl||!e&&0!==c.button||e&&1!==c.touches.length||(c.preventDefault(),b.dragStart(e?c.touches[0]:c))},f=function(a){b.dragEl&&(a.preventDefault(),b.dragMove(e?a.touches[0]:a))},g=function(a){b.dragEl&&(a.preventDefault(),b.dragStop(e?a.touches[0]:a))};e?(this.element[0].addEventListener(j,d,!1),c.addEventListener(k,f,!1),c.addEventListener(l,g,!1),c.addEventListener(m,g,!1)):(this.on(j,d),h.on(k,f),h.on(l,g))},serialize:function(){var b,c=0,d=this;return step=function(b,c){var e=[],f=b.children(d.options.itemNodeName);return f.each(function(){var b=a(this),f=a.extend({},b.data()),g=b.children(d.options.listNodeName);g.length&&(f.children=step(g,c+1)),e.push(f)}),e},b=step(d.element,c)},list:function(b){var c=[],d=this,e=0,b=a.extend({},d.options,b),f=function(d,e,g){var h=d.children(b.itemNodeName);h.each(function(d){var h=a(this),i=a.extend({parent_id:g?g:null,depth:e,order:d},h.data()),j=h.children(b.listNodeName);c.push(i),j.length&&f(j,e+1,h.data(b.idProperty||"id"))})};return f(d.element,e),c},reset:function(){this.mouse={offsetX:0,offsetY:0,startX:0,startY:0,lastX:0,lastY:0,nowX:0,nowY:0,distX:0,distY:0,dirAx:0,dirX:0,dirY:0,lastDirX:0,lastDirY:0,distAxX:0,distAxY:0},this.moving=!1,this.dragEl=null,this.dragRootEl=null,this.dragDepth=0,this.hasNewRoot=!1,this.pointEl=null;for(var a=0;a<g.length;a++)g[a].children().length||g[a].append(this.tplempty);g=[]},toggleItem:function(a){this[a.hasClass(this.options.collapsedClass)?"expandItem":"collapseItem"](a)},expandItem:function(a){a.removeClass(this.options.collapsedClass)},collapseItem:function(a){var b=a.children(this.options.listNodeName);b.length&&a.addClass(this.options.collapsedClass)},expandAll:function(){var b=this;this.find(b.options.itemNodeName).each(function(){b.expandItem(a(this))})},collapseAll:function(){var b=this;this.find(b.options.itemNodeName).each(function(){b.collapseItem(a(this))})},setParent:function(a){a.children(this.options.listNodeName).length&&a.addClass("uk-parent")},unsetParent:function(a){a.removeClass("uk-parent "+this.options.collapsedClass),a.children(this.options.listNodeName).remove()},dragStart:function(b){var c=this.mouse,e=a(b.target),g=e.closest(this.options.itemNodeName),h=g.offset();this.placeEl.css("height",g.height()),c.offsetX=b.pageX-h.left,c.offsetY=b.pageY-h.top,c.startX=c.lastX=h.left,c.startY=c.lastY=h.top,this.dragRootEl=this.element,this.dragEl=a(d.createElement(this.options.listNodeName)).addClass(this.options.listClass+" "+this.options.dragClass),this.dragEl.css("width",g.width()),this.tmpDragOnSiblings=[g[0].previousSibling,g[0].nextSibling],g.after(this.placeEl),g[0].parentNode.removeChild(g[0]),g.appendTo(this.dragEl),a(d.body).append(this.dragEl),this.dragEl.css({left:h.left,top:h.top});var i,j,k=this.dragEl.find(this.options.itemNodeName);for(i=0;i<k.length;i++)j=a(k[i]).parents(this.options.listNodeName).length,j>this.dragDepth&&(this.dragDepth=j);f.addClass(this.options.movingClass)},dragStop:function(){var a=this.dragEl.children(this.options.itemNodeName).first();a[0].parentNode.removeChild(a[0]),this.placeEl.replaceWith(a),this.dragEl.remove(),(this.tmpDragOnSiblings[0]!=a[0].previousSibling||this.tmpDragOnSiblings[0]!=a[0].previousSibling)&&(this.element.trigger("sortable-change",[a,this.hasNewRoot?"added":"moved"]),this.hasNewRoot&&this.dragRootEl.trigger("sortable-change",[a,"removed"])),this.reset(),f.removeClass(this.options.movingClass)},dragMove:function(b){var e,f,h,j,k,l=this.options,m=this.mouse;this.dragEl.css({left:b.pageX-m.offsetX,top:b.pageY-m.offsetY}),m.lastX=m.nowX,m.lastY=m.nowY,m.nowX=b.pageX,m.nowY=b.pageY,m.distX=m.nowX-m.lastX,m.distY=m.nowY-m.lastY,m.lastDirX=m.dirX,m.lastDirY=m.dirY,m.dirX=0===m.distX?0:m.distX>0?1:-1,m.dirY=0===m.distY?0:m.distY>0?1:-1;var n=Math.abs(m.distX)>Math.abs(m.distY)?1:0;if(!m.moving)return m.dirAx=n,void(m.moving=!0);m.dirAx!==n?(m.distAxX=0,m.distAxY=0):(m.distAxX+=Math.abs(m.distX),0!==m.dirX&&m.dirX!==m.lastDirX&&(m.distAxX=0),m.distAxY+=Math.abs(m.distY),0!==m.dirY&&m.dirY!==m.lastDirY&&(m.distAxY=0)),m.dirAx=n,m.dirAx&&m.distAxX>=l.threshold&&(m.distAxX=0,h=this.placeEl.prev(l.itemNodeName),m.distX>0&&h.length&&!h.hasClass(l.collapsedClass)&&(e=h.find(l.listNodeName).last(),k=this.placeEl.parents(l.listNodeName).length,k+this.dragDepth<=l.maxDepth&&(e.length?(e=h.children(l.listNodeName).last(),e.append(this.placeEl)):(e=a("<"+l.listNodeName+"/>").addClass(l.listClass),e.append(this.placeEl),h.append(e),this.setParent(h)))),m.distX<0&&(j=this.placeEl.next(l.itemNodeName),j.length||(f=this.placeEl.parent(),this.placeEl.closest(l.itemNodeName).after(this.placeEl),f.children().length||this.unsetParent(f.parent()))));var o=!1;if(i||(this.dragEl[0].style.visibility="hidden"),this.pointEl=a(d.elementFromPoint(b.pageX-d.body.scrollLeft,b.pageY-(c.pageYOffset||d.documentElement.scrollTop))),i||(this.dragEl[0].style.visibility="visible"),this.pointEl.hasClass(l.handleClass))this.pointEl=this.pointEl.closest(l.itemNodeName);else{var p=this.pointEl.closest("."+l.itemClass);p.length&&(this.pointEl=p.closest(l.itemNodeName))}if(this.pointEl.hasClass(l.emptyClass))o=!0;else if(this.pointEl.data("sortable")&&!this.pointEl.children().length)o=!0,this.pointEl=a(this.tplempty).appendTo(this.pointEl);else if(!this.pointEl.length||!this.pointEl.hasClass(l.listitemClass))return;var q=this.element,r=this.pointEl.closest("."+this.options.listBaseClass),s=q[0]!==this.pointEl.closest("."+this.options.listBaseClass)[0],t=r;if(!m.dirAx||s||o){if(s&&l.group!==t.data("sortable-group"))return;if(g.push(q),k=this.dragDepth-1+this.pointEl.parents(l.listNodeName).length,k>l.maxDepth)return;var u=b.pageY<this.pointEl.offset().top+this.pointEl.height()/2;f=this.placeEl.parent(),o?this.pointEl.replaceWith(this.placeEl):u?this.pointEl.before(this.placeEl):this.pointEl.after(this.placeEl),f.children().length||f.data("sortable")||this.unsetParent(f.parent()),this.dragRootEl.find(l.itemNodeName).length||this.dragRootEl.children().length||this.dragRootEl.append(this.tplempty),s&&(this.dragRootEl=r,this.hasNewRoot=this.element[0]!==this.dragRootEl[0])}}}),a(d).on("uk-domready",function(){a("[data-uk-sortable]").each(function(){var c=a(this);if(!c.data("sortable")){b.sortable(c,b.Utils.options(c.attr("data-uk-sortable")))}})}),b.sortable});