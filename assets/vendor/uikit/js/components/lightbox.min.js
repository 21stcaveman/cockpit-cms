/*! UIkit 2.16.2 | http://www.getuikit.com | (c) 2014 YOOtheme | MIT License */
!function(i){var t;jQuery&&UIkit&&(t=i(jQuery,UIkit)),"function"==typeof define&&define.amd&&define(["uikit-lightbox"],function(){return t||i(jQuery,UIkit)})}(function(i,t){function o(o){return e?(e.lightbox=o,e):(e=t.$(['<div class="uk-modal">','<div class="uk-modal-dialog uk-modal-dialog-lightbox uk-slidenav-position" style="margin-left:auto;margin-right:auto;width:200px;height:200px;top:'+Math.abs(window.innerHeight/2-200)+'px;">','<a href="#" class="uk-modal-close uk-close uk-close-alt"></a>','<div class="uk-lightbox-content"></div>','<div class="uk-modal-spinner uk-hidden"></div>',"</div>","</div>"].join("")).appendTo("body"),e.dialog=e.find(".uk-modal-dialog:first"),e.content=e.find(".uk-lightbox-content:first"),e.loader=e.find(".uk-modal-spinner:first"),e.closer=e.find(".uk-close.uk-close-alt"),e.modal=t.modal(e),e.on("swipeRight swipeLeft",function(i){e.lightbox["swipeLeft"==i.type?"next":"previous"]()}).on("click","[data-lightbox-previous], [data-lightbox-next]",function(t){t.preventDefault(),e.lightbox[i(this).is("[data-lightbox-next]")?"next":"previous"]()}),e.on("hide.uk.modal",function(){e.content.html("")}),t.$win.on("load resize orientationchange",t.Utils.debounce(function(){e.is(":visible")&&e.lightbox.fitSize()}.bind(this),100)),e.lightbox=o,e)}var e,n={};return t.component("lightbox",{defaults:{group:!1,duration:400,keyboard:!0},index:0,items:!1,boot:function(){t.$html.on("click","[data-uk-lightbox]",function(i){i.preventDefault();var o=t.$(this);o.data("lightbox")||t.lightbox(o,t.Utils.options(o.attr("data-uk-lightbox"))),o.data("lightbox").show(o)}),t.$doc.on("keyup",function(i){if(e&&e.is(":visible")&&e.lightbox.options.keyboard)switch(i.preventDefault(),i.keyCode){case 37:e.lightbox.previous();break;case 39:e.lightbox.next()}})},init:function(){this.siblings=this.options.group?t.$(['[data-uk-lightbox*="'+this.options.group+'"]',"[data-uk-lightbox*='"+this.options.group+"']"].join(",")):this.element,this.index=this.siblings.index(this.element),this.trigger("lightbox-init",[this])},show:function(t){this.modal=o(this),this.modal.dialog.stop(),this.modal.content.stop();var e,n,s,h,a=this,d=i.Deferred();t=t||0,"object"==typeof t&&(t=this.siblings.index(t)),0>t?t=this.siblings.length-t:this.siblings[t]||(t=0),s=this.siblings.eq(t),n=s.attr("href"),h=s.attr("title"),e={lightbox:a,source:n,type:s.data("lightboxType")||"auto",index:t,promise:d,title:h,item:s,meta:{content:"",width:null,height:null}},this.index=t,this.modal.content.empty(),this.modal.is(":visible")||(this.modal.content.css({width:"",height:""}).empty(),this.modal.modal.show()),this.modal.loader.removeClass("uk-hidden"),d.promise().done(function(){a.data=e,a.fitSize(e)}).fail(function(){alert("Loading resource failed!")}),a.trigger("show.uk.lightbox",[e])},fitSize:function(){var t=this,o=this.data,e=this.modal.dialog.outerWidth()-this.modal.dialog.width(),n=parseInt(this.modal.dialog.css("margin-top"),10)+parseInt(this.modal.dialog.css("margin-bottom"),10),s=o.meta.content,h=t.options.duration;this.siblings.length>1&&(s=[s,'<a href="#" class="uk-slidenav uk-slidenav-contrast uk-slidenav-previous uk-hidden-touch" data-lightbox-previous></a>','<a href="#" class="uk-slidenav uk-slidenav-contrast uk-slidenav-next uk-hidden-touch" data-lightbox-next></a>'].join(""));var a,d,l=i("<div>&nbsp;</div>").css({opacity:0,position:"absolute",top:0,left:0,width:"100%","max-width":t.modal.dialog.css("max-width"),padding:t.modal.dialog.css("padding"),margin:t.modal.dialog.css("margin")}),r=o.meta.width,u=o.meta.height;l.appendTo("body").width(),a=l.width(),d=window.innerHeight-2*n,l.remove(),a<o.meta.width&&(u=Math.floor(u*(a/r)),r=a),u>d&&(u=Math.floor(d),r=Math.ceil(o.meta.width*(d/o.meta.height))),this.modal.content.css("opacity",0).width(r).html(s),this.modal.dialog.find(".uk-modal-caption").remove(),o.title&&this.modal.dialog.append('<div class="uk-modal-caption">'+o.title+"</div>"),"iframe"==o.type&&this.modal.content.find("iframe:first").height(u);var c=u+e,g=Math.floor(window.innerHeight/2-c/2)-n;0>g&&(g=0),this.modal.closer.addClass("uk-hidden"),t.modal.data("mwidth")==r&&t.modal.data("mheight")==u&&(h=0),this.modal.dialog.animate({width:r+e,height:u+e,top:g},h,"swing",function(){t.modal.loader.addClass("uk-hidden"),t.modal.content.css({width:""}).animate({opacity:1},function(){t.modal.closer.removeClass("uk-hidden")}),t.modal.data({mwidth:r,mheight:u})})},next:function(){this.show(this.siblings[this.index+1]?this.index+1:0)},previous:function(){this.show(this.siblings[this.index-1]?this.index-1:this.siblings.length-1)}}),t.plugin("lightbox","image",{init:function(i){i.on("show.uk.lightbox",function(i,t){if("image"==t.type||t.source&&t.source.match(/\.(jpg|jpeg|png|gif|svg)$/)){var o=function(i,o,e){t.meta={content:'<img class="uk-responsive-width" width="'+o+'" height="'+e+'" src ="'+i+'">',width:o,height:e},t.type="image",t.promise.resolve()};if(n[t.source])o(t.source,n[t.source].width,n[t.source].height);else{var e=new Image;e.onerror=function(){t.promise.reject("Loading image failed")},e.onload=function(){n[t.source]={width:e.width,height:e.height},o(t.source,n[t.source].width,n[t.source].height)},e.src=t.source}}})}}),t.plugin("lightbox","youtube",{init:function(i){var t=/(\/\/.*?youtube\.[a-z]+)\/watch\?v=([^&]+)&?(.*)/,o=/youtu\.be\/(.*)/;i.on("show.uk.lightbox",function(i,e){var s,h,a=function(i,t,o){e.meta={content:'<iframe src="//www.youtube.com/embed/'+i+'" width="'+t+'" height="'+o+'" style="max-width:100%;"></iframe>',width:t,height:o},e.type="iframe",e.promise.resolve()};if((h=e.source.match(t))&&(s=h[2]),(h=e.source.match(o))&&(s=h[1]),s){if(n[s])a(s,n[s].width,n[s].height);else{var d=new Image;d.onerror=function(){n[s]={width:640,height:320},a(s,n[s].width,n[s].height)},d.onload=function(){n[s]={width:d.width,height:d.height},a(s,d.width,d.height)},d.src="//img.youtube.com/vi/"+s+"/0.jpg"}i.stopImmediatePropagation()}})}}),t.plugin("lightbox","vimeo",{init:function(t){var o,e=/(\/\/.*?)vimeo\.[a-z]+\/([0-9]+).*?/;t.on("show.uk.lightbox",function(t,s){var h,a=function(i,t,o){s.meta={content:'<iframe src="//player.vimeo.com/video/'+i+'" width="'+t+'" height="'+o+'" style="width:100%;box-sizing:border-box;"></iframe>',width:t,height:o},s.type="iframe",s.promise.resolve()};(o=s.source.match(e))&&(h=o[2],n[h]?a(h,n[h].width,n[h].height):i.ajax({type:"GET",url:"http://vimeo.com/api/oembed.json?url="+encodeURI(s.source),jsonp:"callback",dataType:"jsonp",success:function(i){n[h]={width:i.width,height:i.height},a(h,n[h].width,n[h].height)}}),t.stopImmediatePropagation())})}}),t.plugin("lightbox","video",{init:function(t){t.on("show.uk.lightbox",function(t,o){var e=function(i,t,e){o.meta={content:'<video class="uk-responsive-width" src="'+i+'" width="'+t+'" height="'+e+'" controls></video>',width:t,height:e},o.type="video",o.promise.resolve()};if("video"==o.type||o.source.match(/\.(mp4|webm|ogv)$/))if(n[o.source])e(o.source,n[o.source].width,n[o.source].height);else var s=i('<video style="position:fixed;visibility:hidden;top:-10000px;"></video>').attr("src",o.source).appendTo("body"),h=setInterval(function(){s[0].videoWidth&&(clearInterval(h),n[o.source]={width:s[0].videoWidth,height:s[0].videoHeight},e(o.source,n[o.source].width,n[o.source].height),s.remove())},20)})}}),t.lightbox});