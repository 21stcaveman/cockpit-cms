/*! UIkit 2.16.2 | http://www.getuikit.com | (c) 2014 YOOtheme | MIT License */
!function(i){var t;window.UIkit&&(t=i(UIkit)),"function"==typeof define&&define.amd&&define(["uikit-lightbox"],function(){return t||i(UIkit)})}(function(i){"use strict";function t(t){return o?(o.lightbox=t,o):(o=i.$(['<div class="uk-modal">','<div class="uk-modal-dialog uk-modal-dialog-lightbox uk-slidenav-position" style="margin-left:auto;margin-right:auto;width:200px;height:200px;top:'+Math.abs(window.innerHeight/2-200)+'px;">','<a href="#" class="uk-modal-close uk-close uk-close-alt"></a>','<div class="uk-lightbox-content"></div>','<div class="uk-modal-spinner uk-hidden"></div>',"</div>","</div>"].join("")).appendTo("body"),o.dialog=o.find(".uk-modal-dialog:first"),o.content=o.find(".uk-lightbox-content:first"),o.loader=o.find(".uk-modal-spinner:first"),o.closer=o.find(".uk-close.uk-close-alt"),o.modal=i.modal(o),o.on("swipeRight swipeLeft",function(i){o.lightbox["swipeLeft"==i.type?"next":"previous"]()}).on("click","[data-lightbox-previous], [data-lightbox-next]",function(i){i.preventDefault(),o.lightbox[$(this).is("[data-lightbox-next]")?"next":"previous"]()}),o.on("hide.uk.modal",function(){o.content.html("")}),i.$win.on("load resize orientationchange",i.Utils.debounce(function(){o.is(":visible")&&o.lightbox.fitSize()}.bind(this),100)),o.lightbox=t,o)}var o,e={};return i.component("lightbox",{defaults:{group:!1,duration:400,keyboard:!0},index:0,items:!1,boot:function(){i.$html.on("click","[data-uk-lightbox]",function(t){t.preventDefault();var o=i.$(this);o.data("lightbox")||i.lightbox(o,i.Utils.options(o.attr("data-uk-lightbox"))),o.data("lightbox").show(o)}),i.$doc.on("keyup",function(i){if(o&&o.is(":visible")&&o.lightbox.options.keyboard)switch(i.preventDefault(),i.keyCode){case 37:o.lightbox.previous();break;case 39:o.lightbox.next()}})},init:function(){this.siblings=this.options.group?i.$(['[data-uk-lightbox*="'+this.options.group+'"]',"[data-uk-lightbox*='"+this.options.group+"']"].join(",")):this.element,this.index=this.siblings.index(this.element),this.trigger("lightbox-init",[this])},show:function(o){this.modal=t(this),this.modal.dialog.stop(),this.modal.content.stop();var e,n,s,h,a=this,d=i.$.Deferred();o=o||0,"object"==typeof o&&(o=this.siblings.index(o)),0>o?o=this.siblings.length-o:this.siblings[o]||(o=0),s=this.siblings.eq(o),n=s.attr("href"),h=s.attr("title"),e={lightbox:a,source:n,type:s.data("lightboxType")||"auto",index:o,promise:d,title:h,item:s,meta:{content:"",width:null,height:null}},this.index=o,this.modal.content.empty(),this.modal.is(":visible")||(this.modal.content.css({width:"",height:""}).empty(),this.modal.modal.show()),this.modal.loader.removeClass("uk-hidden"),d.promise().done(function(){a.data=e,a.fitSize(e)}).fail(function(){alert("Loading resource failed!")}),a.trigger("show.uk.lightbox",[e])},fitSize:function(){var t=this,o=this.data,e=this.modal.dialog.outerWidth()-this.modal.dialog.width(),n=parseInt(this.modal.dialog.css("margin-top"),10)+parseInt(this.modal.dialog.css("margin-bottom"),10),s=o.meta.content,h=t.options.duration;this.siblings.length>1&&(s=[s,'<a href="#" class="uk-slidenav uk-slidenav-contrast uk-slidenav-previous uk-hidden-touch" data-lightbox-previous></a>','<a href="#" class="uk-slidenav uk-slidenav-contrast uk-slidenav-next uk-hidden-touch" data-lightbox-next></a>'].join(""));var a,d,l=i.$("<div>&nbsp;</div>").css({opacity:0,position:"absolute",top:0,left:0,width:"100%","max-width":t.modal.dialog.css("max-width"),padding:t.modal.dialog.css("padding"),margin:t.modal.dialog.css("margin")}),r=o.meta.width,c=o.meta.height;l.appendTo("body").width(),a=l.width(),d=window.innerHeight-2*n,l.remove(),a<o.meta.width&&(c=Math.floor(c*(a/r)),r=a),c>d&&(c=Math.floor(d),r=Math.ceil(o.meta.width*(d/o.meta.height))),this.modal.content.css("opacity",0).width(r).html(s),this.modal.dialog.find(".uk-modal-caption").remove(),o.title&&this.modal.dialog.append('<div class="uk-modal-caption">'+o.title+"</div>"),"iframe"==o.type&&this.modal.content.find("iframe:first").height(c);var u=c+e,g=Math.floor(window.innerHeight/2-u/2)-n;0>g&&(g=0),this.modal.closer.addClass("uk-hidden"),t.modal.data("mwidth")==r&&t.modal.data("mheight")==c&&(h=0),this.modal.dialog.animate({width:r+e,height:c+e,top:g},h,"swing",function(){t.modal.loader.addClass("uk-hidden"),t.modal.content.css({width:""}).animate({opacity:1},function(){t.modal.closer.removeClass("uk-hidden")}),t.modal.data({mwidth:r,mheight:c})})},next:function(){this.show(this.siblings[this.index+1]?this.index+1:0)},previous:function(){this.show(this.siblings[this.index-1]?this.index-1:this.siblings.length-1)}}),i.plugin("lightbox","image",{init:function(i){i.on("show.uk.lightbox",function(i,t){if("image"==t.type||t.source&&t.source.match(/\.(jpg|jpeg|png|gif|svg)$/)){var o=function(i,o,e){t.meta={content:'<img class="uk-responsive-width" width="'+o+'" height="'+e+'" src ="'+i+'">',width:o,height:e},t.type="image",t.promise.resolve()};if(e[t.source])o(t.source,e[t.source].width,e[t.source].height);else{var n=new Image;n.onerror=function(){t.promise.reject("Loading image failed")},n.onload=function(){e[t.source]={width:n.width,height:n.height},o(t.source,e[t.source].width,e[t.source].height)},n.src=t.source}}})}}),i.plugin("lightbox","youtube",{init:function(i){var t=/(\/\/.*?youtube\.[a-z]+)\/watch\?v=([^&]+)&?(.*)/,o=/youtu\.be\/(.*)/;i.on("show.uk.lightbox",function(i,n){var s,h,a=function(i,t,o){n.meta={content:'<iframe src="//www.youtube.com/embed/'+i+'" width="'+t+'" height="'+o+'" style="max-width:100%;"></iframe>',width:t,height:o},n.type="iframe",n.promise.resolve()};if((h=n.source.match(t))&&(s=h[2]),(h=n.source.match(o))&&(s=h[1]),s){if(e[s])a(s,e[s].width,e[s].height);else{var d=new Image;d.onerror=function(){e[s]={width:640,height:320},a(s,e[s].width,e[s].height)},d.onload=function(){e[s]={width:d.width,height:d.height},a(s,d.width,d.height)},d.src="//img.youtube.com/vi/"+s+"/0.jpg"}i.stopImmediatePropagation()}})}}),i.plugin("lightbox","vimeo",{init:function(t){var o,n=/(\/\/.*?)vimeo\.[a-z]+\/([0-9]+).*?/;t.on("show.uk.lightbox",function(t,s){var h,a=function(i,t,o){s.meta={content:'<iframe src="//player.vimeo.com/video/'+i+'" width="'+t+'" height="'+o+'" style="width:100%;box-sizing:border-box;"></iframe>',width:t,height:o},s.type="iframe",s.promise.resolve()};(o=s.source.match(n))&&(h=o[2],e[h]?a(h,e[h].width,e[h].height):i.$.ajax({type:"GET",url:"http://vimeo.com/api/oembed.json?url="+encodeURI(s.source),jsonp:"callback",dataType:"jsonp",success:function(i){e[h]={width:i.width,height:i.height},a(h,e[h].width,e[h].height)}}),t.stopImmediatePropagation())})}}),i.plugin("lightbox","video",{init:function(t){t.on("show.uk.lightbox",function(t,o){var n=function(i,t,e){o.meta={content:'<video class="uk-responsive-width" src="'+i+'" width="'+t+'" height="'+e+'" controls></video>',width:t,height:e},o.type="video",o.promise.resolve()};if("video"==o.type||o.source.match(/\.(mp4|webm|ogv)$/))if(e[o.source])n(o.source,e[o.source].width,e[o.source].height);else var s=i.$('<video style="position:fixed;visibility:hidden;top:-10000px;"></video>').attr("src",o.source).appendTo("body"),h=setInterval(function(){s[0].videoWidth&&(clearInterval(h),e[o.source]={width:s[0].videoWidth,height:s[0].videoHeight},n(o.source,e[o.source].width,e[o.source].height),s.remove())},20)})}}),i.lightbox});